# GitHub Copilot å¼€å‘æŒ‡å—

> **YYC3-KTV å•†å®¶ç®¡ç†ç³»ç»Ÿ** - AI åä½œç¼–ç è§„èŒƒä¸é¡¹ç›®æŒ‡å—  
> ç‰ˆæœ¬: v1.0 | åˆ›å»ºæ—¥æœŸ: 2025-01-19 | ç»´æŠ¤è€…: YYC-Cube

---

## ğŸ“š é¡¹ç›®æ¦‚è§ˆ

### ç³»ç»Ÿç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ª**ç°ä»£åŒ– KTV å•†å®¶åå°ç®¡ç†ç³»ç»Ÿ**,åŸºäº **Next.js 15 App Router** + **React 19** + **TypeScript** æ„å»º,é›†æˆäº†:

- âœ… **å…­å¤§æ ¸å¿ƒæŠ€æœ¯æ¨¡å—**: AI æ™ºèƒ½ã€åŒºå—é“¾ã€è¾¹ç¼˜è®¡ç®—ã€5G åº”ç”¨ã€ç‰©è”ç½‘ã€å¤§æ•°æ®åˆ†æ
- âœ… **ä¹å¤§ AI æ™ºèƒ½è¿è¥ç³»ç»Ÿ**: æˆæœ¬è®¡ç®—ã€å®¢æˆ·è¥é”€ã€å›è®¿é‚€çº¦ã€æ‰§è¡Œè·Ÿè¸ªã€åé¦ˆä½“ç³»ã€å†…éƒ¨æ²Ÿé€šã€äººåŠ›èµ„æºã€æˆ˜ç•¥å†³ç­–ã€åˆè§„å®¡è®¡
- âœ… **å®Œæ•´ä¸šåŠ¡æ¨¡å—**: é”€å”®ã€å•†å“ã€ä»“åº“ã€ä¼šå‘˜ã€è´¢åŠ¡ã€é—¨åº—ã€è®¾ç½®ç­‰

### æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‰ç«¯å±‚ (Next.js 15 + React 19)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  App Router â”‚ Server Components â”‚ Client Components    â”‚
â”‚  Tailwind v4 â”‚ Framer Motion â”‚ Radix UI + shadcn/ui   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   APIå±‚ (Next.js API Routes)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RESTful API â”‚ GraphQL Gateway â”‚ WebSocket             â”‚
â”‚  Rate Limiting â”‚ Authentication â”‚ Authorization        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   ä¸šåŠ¡æœåŠ¡å±‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AI Services â”‚ Blockchain â”‚ Edge Computing â”‚ IoT       â”‚
â”‚  Payment â”‚ Notification â”‚ Analytics â”‚ Sync              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   æ•°æ®å­˜å‚¨å±‚                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MySQL 8.0 â”‚ Redis â”‚ Vercel KV â”‚ ClickHouse           â”‚
â”‚  MQTT â”‚ Kafka â”‚ MinIO â”‚ Elasticsearch                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ ¸å¿ƒå¼€å‘åŸåˆ™

### 1. ç›®å½•ç»“æ„è§„èŒƒ

ä¸¥æ ¼éµå¾ª **Next.js 15 App Router** ç›®å½•ç»“æ„:

```typescript
/
â”œâ”€â”€ app/                          # Next.js App Router ç›®å½•
â”‚   â”œâ”€â”€ api/                      # APIè·¯ç”± (RESTful endpoints)
â”‚   â”‚   â”œâ”€â”€ products/route.ts     # å•†å“API
â”‚   â”‚   â”œâ”€â”€ orders/route.ts       # è®¢å•API
â”‚   â”‚   â”œâ”€â”€ ai/                   # AIç›¸å…³API
â”‚   â”‚   â””â”€â”€ blockchain/           # åŒºå—é“¾API
â”‚   â”œâ”€â”€ dashboard/                # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”‚   â”œâ”€â”€ products/page.tsx     # å•†å“ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ orders/page.tsx       # è®¢å•ç®¡ç†é¡µé¢
â”‚   â”‚   â””â”€â”€ ai/                   # AIç®¡ç†ç•Œé¢
â”‚   â”œâ”€â”€ mobile/                   # ç§»åŠ¨ç«¯é¡µé¢
â”‚   â”œâ”€â”€ layout.tsx                # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx                  # é¦–é¡µ
â”‚   â””â”€â”€ globals.css               # å…¨å±€æ ·å¼
â”œâ”€â”€ components/                   # Reactç»„ä»¶
â”‚   â”œâ”€â”€ ui/                       # shadcn/uiåŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ products/                 # å•†å“ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ auth/                     # è®¤è¯ç»„ä»¶
â”‚   â”œâ”€â”€ dashboard/                # ä»ªè¡¨æ¿ç»„ä»¶
â”‚   â””â”€â”€ layout/                   # å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ lib/                          # ä¸šåŠ¡é€»è¾‘åº“
â”‚   â”œâ”€â”€ services/                 # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ products.ts           # å•†å“æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ payment.ts            # æ”¯ä»˜æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ notification.ts       # é€šçŸ¥æœåŠ¡
â”‚   â”‚   â””â”€â”€ analytics.ts          # åˆ†ææœåŠ¡
â”‚   â”œâ”€â”€ ai/                       # AIåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ chatbot.ts            # æ™ºèƒ½å®¢æœ
â”‚   â”‚   â””â”€â”€ dynamic-pricing.ts   # åŠ¨æ€å®šä»·
â”‚   â”œâ”€â”€ blockchain/               # åŒºå—é“¾åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ loyalty-system.ts    # ç§¯åˆ†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ iot/                      # ç‰©è”ç½‘åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ smart-energy-management.ts
â”‚   â”œâ”€â”€ store/                    # ZustandçŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ auth-store.ts         # è®¤è¯çŠ¶æ€
â”‚   â”œâ”€â”€ validations/              # ZodéªŒè¯schema
â”‚   â”‚   â”œâ”€â”€ product.ts            # å•†å“éªŒè¯
â”‚   â”‚   â””â”€â”€ order.ts              # è®¢å•éªŒè¯
â”‚   â”œâ”€â”€ cache/                    # ç¼“å­˜å·¥å…·
â”‚   â”‚   â””â”€â”€ redis.ts              # Redisç¼“å­˜
â”‚   â”œâ”€â”€ monitoring/               # ç›‘æ§å·¥å…·
â”‚   â”‚   â”œâ”€â”€ logger.ts             # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ metrics.ts            # æ€§èƒ½æŒ‡æ ‡
â”‚   â””â”€â”€ utils.ts                  # å·¥å…·å‡½æ•°
â”œâ”€â”€ __tests__/                    # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                     # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/              # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ e2e/                      # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ fixtures/                 # æµ‹è¯•æ•°æ®
â”œâ”€â”€ docs/                         # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ MODULE_OVERVIEW.md        # æ¨¡å—æ¦‚è§ˆ
â”‚   â”œâ”€â”€ FEATURE_LIST.md           # åŠŸèƒ½æ¸…å•
â”‚   â””â”€â”€ SYSTEM_AUDIT_REPORT.md   # ç³»ç»Ÿå®¡è®¡æŠ¥å‘Š
â”œâ”€â”€ configs/                      # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ performance_rules.json    # æ€§èƒ½è§„åˆ™
â”‚   â””â”€â”€ promotion_criteria.yaml   # æ™‹å‡æ ‡å‡†
â”œâ”€â”€ jest.config.ts                # Jesté…ç½®
â”œâ”€â”€ playwright.config.ts          # Playwrighté…ç½®
â”œâ”€â”€ next.config.mjs               # Next.jsé…ç½®
â””â”€â”€ tsconfig.json                 # TypeScripté…ç½®
```

### 2. å‘½åè§„èŒƒ

#### æ–‡ä»¶å‘½å

```typescript
// âœ… æ­£ç¡®ç¤ºä¾‹
route.ts // APIè·¯ç”±æ–‡ä»¶
page.tsx // é¡µé¢æ–‡ä»¶
layout.tsx // å¸ƒå±€æ–‡ä»¶
product - list.tsx // kebab-caseç»„ä»¶
useProducts.ts // camelCase Hook
auth - store.ts // kebab-caseçŠ¶æ€ç®¡ç†

// âŒ é”™è¯¯ç¤ºä¾‹
Product.tsx // ç»„ä»¶æ–‡ä»¶ä¸ä½¿ç”¨PascalCaseå‘½å
products_api.ts // ä¸ä½¿ç”¨snake_case
ProductsPage.tsx // é¡µé¢æ–‡ä»¶åº”ä¸ºpage.tsx
```

#### å˜é‡ä¸å‡½æ•°å‘½å

```typescript
// âœ… æ­£ç¡®: ä½¿ç”¨camelCaseå’Œè¯­ä¹‰åŒ–å‘½å
const productList = [...];
const isAuthenticated = true;
function calculateTotalPrice(items: Product[]) {}
async function fetchUserData() {}

// âŒ é”™è¯¯: å‘½åä¸æ¸…æ™°æˆ–ä½¿ç”¨é”™è¯¯æ ¼å¼
const data = [...];                // å¤ªæ³›åŒ–
const is_valid = true;             // åº”ä½¿ç”¨camelCase
function calc(x) {}                // ç¼©å†™ä¸æ¸…æ™°
```

#### ç±»å‹ä¸æ¥å£å‘½å

```typescript
// âœ… æ­£ç¡®: ä½¿ç”¨PascalCaseå’Œæè¿°æ€§å‘½å
interface Product {
  id: string
  name: string
  price: number
}

type ProductStatus = 'active' | 'inactive' | 'discontinued'

// âŒ é”™è¯¯
interface product {} // åº”ä½¿ç”¨PascalCase
type Status = string // å¤ªæ³›åŒ–
```

### 3. å¯¼å…¥é¡ºåºè§„èŒƒ

ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹é¡ºåºç»„ç»‡å¯¼å…¥è¯­å¥:

```typescript
// 1. Reactæ ¸å¿ƒåº“
import React from 'react'
import { useState, useEffect } from 'react'

// 2. Next.jsæ ¸å¿ƒåº“
import { useRouter } from 'next/navigation'
import Link from 'next/link'

// 3. ç¬¬ä¸‰æ–¹åº“ (æŒ‰å­—æ¯é¡ºåº)
import { Button } from '@/components/ui/button'
import { z } from 'zod'
import { motion } from 'framer-motion'

// 4. é¡¹ç›®å†…éƒ¨æ¨¡å—
import { ProductList } from '@/components/products/product-list'
import { useAuth } from '@/lib/store/auth-store'
import { cn } from '@/lib/utils'

// 5. ç±»å‹å®šä¹‰
import type { Product } from '@/lib/types'

// 6. æ ·å¼æ–‡ä»¶
import './styles.css'
```

### 4. TypeScript ä¸¥æ ¼æ¨¡å¼

å¯ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥,é¿å…ä½¿ç”¨ `any`:

```typescript
// âœ… æ­£ç¡®: æ˜ç¡®ç±»å‹å®šä¹‰
interface ProductFilters {
  categoryId?: string
  priceRange?: { min: number; max: number }
  keyword?: string
}

async function fetchProducts(filters: ProductFilters): Promise<Product[]> {
  // å®ç°é€»è¾‘
}

// âŒ é”™è¯¯: ä½¿ç”¨any
async function fetchData(params: any): Promise<any> {
  // ç¼ºå°‘ç±»å‹å®‰å…¨
}
```

**å¿…é¡»å®šä¹‰ç±»å‹çš„åœºæ™¯**:

- æ‰€æœ‰å‡½æ•°å‚æ•°å’Œè¿”å›å€¼
- API å“åº”æ•°æ®
- ç»„ä»¶ Props
- çŠ¶æ€ç®¡ç† store
- äº‹ä»¶å¤„ç†å‡½æ•°å‚æ•°

---

## ğŸ§© ç»„ä»¶å¼€å‘è§„èŒƒ

### 1. Server Components vs Client Components

**ä¼˜å…ˆä½¿ç”¨ Server Components**,ä»…åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨ `'use client'`:

- éœ€è¦ä½¿ç”¨ React Hooks (useState, useEffect ç­‰)
- éœ€è¦æµè§ˆå™¨ API (window, document ç­‰)
- éœ€è¦äº‹ä»¶å¤„ç†å™¨ (onClick, onChange ç­‰)
- éœ€è¦è®¿é—® Context API

```typescript
// âœ… Server Component (é»˜è®¤)
// app/dashboard/products/page.tsx
import { ProductList } from '@/components/products/product-list'

export default async function ProductsPage() {
  const products = await fetchProducts() // æœåŠ¡ç«¯æ•°æ®è·å–
  return <ProductList products={products} />
}

// âœ… Client Component (æ˜ç¡®æ ‡è®°)
// components/products/product-search.tsx
;('use client')

import { useState } from 'react'

export function ProductSearch() {
  const [query, setQuery] = useState('')
  return <input value={query} onChange={e => setQuery(e.target.value)} />
}
```

### 2. ç»„ä»¶ç»“æ„æ¨¡æ¿

```typescript
'use client' // ä»…Client Componentéœ€è¦

import { useState } from 'react'
import { Button } from '@/components/ui/button'
import { cn } from '@/lib/utils'
import type { Product } from '@/lib/types'

// Propsæ¥å£å®šä¹‰
interface ProductCardProps {
  product: Product
  onAddToCart?: (productId: string) => void
  className?: string
}

// ç»„ä»¶å®ç°
export function ProductCard({ product, onAddToCart, className }: ProductCardProps) {
  const [isLoading, setIsLoading] = useState(false)

  const handleClick = async () => {
    setIsLoading(true)
    try {
      await onAddToCart?.(product.id)
    } catch (error) {
      console.error('æ·»åŠ å¤±è´¥:', error)
    } finally {
      setIsLoading(false)
    }
  }

  return (
    <div className={cn('rounded-lg border p-4', className)}>
      <h3 className="text-lg font-semibold">{product.name}</h3>
      <p className="text-sm text-muted-foreground">{product.description}</p>
      <Button onClick={handleClick} disabled={isLoading}>
        {isLoading ? 'æ·»åŠ ä¸­...' : 'åŠ å…¥è´­ç‰©è½¦'}
      </Button>
    </div>
  )
}
```

### 3. Tailwind CSS ä½¿ç”¨è§„èŒƒ

**ä¼˜å…ˆä½¿ç”¨ Tailwind å·¥å…·ç±»**,é¿å…è‡ªå®šä¹‰ CSS:

```typescript
// âœ… æ­£ç¡®: ä½¿ç”¨Tailwindå·¥å…·ç±»
<div className="flex items-center justify-between gap-4 p-6 bg-white rounded-lg shadow-md">
  <h2 className="text-2xl font-bold text-gray-900">å•†å“åˆ—è¡¨</h2>
  <Button className="bg-blue-500 hover:bg-blue-600">æ–°å¢å•†å“</Button>
</div>

// âœ… ä½¿ç”¨cn()å·¥å…·åˆå¹¶æ¡ä»¶æ ·å¼
<div className={cn(
  'rounded-lg border p-4',
  isActive && 'bg-blue-50 border-blue-500',
  isDisabled && 'opacity-50 cursor-not-allowed'
)}>
  å†…å®¹
</div>

// âŒ é”™è¯¯: ä½¿ç”¨å†…è”æ ·å¼æˆ–è‡ªå®šä¹‰CSS
<div style={{ display: 'flex', padding: '24px' }}>...</div>
```

### 4. çŠ¶æ€ç®¡ç† (Zustand)

```typescript
// lib/store/product-store.ts
import { create } from 'zustand'
import type { Product } from '@/lib/types'

interface ProductStore {
  products: Product[]
  selectedProduct: Product | null
  isLoading: boolean
  error: string | null

  // Actions
  setProducts: (products: Product[]) => void
  selectProduct: (id: string) => void
  clearSelection: () => void
}

export const useProductStore = create<ProductStore>(set => ({
  products: [],
  selectedProduct: null,
  isLoading: false,
  error: null,

  setProducts: products => set({ products }),
  selectProduct: id =>
    set(state => ({
      selectedProduct: state.products.find(p => p.id === id) || null,
    })),
  clearSelection: () => set({ selectedProduct: null }),
}))

// ä½¿ç”¨ç¤ºä¾‹
// components/products/product-list.tsx
;('use client')

import { useProductStore } from '@/lib/store/product-store'

export function ProductList() {
  const { products, selectProduct } = useProductStore()

  return (
    <div>
      {products.map(product => (
        <div key={product.id} onClick={() => selectProduct(product.id)}>
          {product.name}
        </div>
      ))}
    </div>
  )
}
```

---

## ğŸ”§ API å¼€å‘è§„èŒƒ

### 1. API è·¯ç”±ç»“æ„

```typescript
// app/api/products/route.ts
import { NextRequest, NextResponse } from 'next/server'
import { z } from 'zod'
import { ProductService } from '@/lib/services/products'

// æŸ¥è¯¢å‚æ•°éªŒè¯Schema
const GetProductsSchema = z.object({
  page: z.coerce.number().int().positive().default(1),
  pageSize: z.coerce.number().int().min(1).max(100).default(10),
  categoryId: z.string().optional(),
  keyword: z.string().optional(),
})

// GET /api/products - è·å–å•†å“åˆ—è¡¨
export async function GET(request: NextRequest) {
  try {
    // è§£ææŸ¥è¯¢å‚æ•°
    const searchParams = Object.fromEntries(request.nextUrl.searchParams)
    const params = GetProductsSchema.parse(searchParams)

    // è°ƒç”¨ä¸šåŠ¡æœåŠ¡
    const result = await ProductService.getProducts(params)

    return NextResponse.json({
      success: true,
      data: result.data,
      pagination: {
        page: result.page,
        pageSize: result.pageSize,
        total: result.total,
      },
    })
  } catch (error) {
    console.error('[API] è·å–å•†å“åˆ—è¡¨å¤±è´¥:', error)

    if (error instanceof z.ZodError) {
      return NextResponse.json(
        { success: false, error: 'å‚æ•°éªŒè¯å¤±è´¥', details: error.errors },
        { status: 400 }
      )
    }

    return NextResponse.json({ success: false, error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯' }, { status: 500 })
  }
}

// POST /api/products - åˆ›å»ºå•†å“
export async function POST(request: NextRequest) {
  try {
    const body = await request.json()
    const validatedData = CreateProductSchema.parse(body)

    const product = await ProductService.createProduct(validatedData)

    return NextResponse.json({ success: true, data: product }, { status: 201 })
  } catch (error) {
    console.error('[API] åˆ›å»ºå•†å“å¤±è´¥:', error)

    return NextResponse.json({ success: false, error: error.message }, { status: 500 })
  }
}
```

### 2. æ•°æ®éªŒè¯ (Zod)

**æ‰€æœ‰ API è¾“å…¥å¿…é¡»ä½¿ç”¨ Zod éªŒè¯**:

```typescript
// lib/validations/product.ts
import { z } from 'zod'

// å•†å“éªŒè¯Schema
export const productSchema = z.object({
  name: z.string().min(1, 'å•†å“åç§°ä¸èƒ½ä¸ºç©º').max(100),
  description: z.string().optional(),
  price: z.number().positive('ä»·æ ¼å¿…é¡»å¤§äº0'),
  categoryId: z.string().uuid('æ— æ•ˆçš„åˆ†ç±»ID'),
  status: z.enum(['active', 'inactive', 'discontinued']),
  stock: z.number().int().nonnegative('åº“å­˜ä¸èƒ½ä¸ºè´Ÿæ•°'),
  images: z.array(z.string().url()).max(10),
})

export type Product = z.infer<typeof productSchema>

// åˆ›å»ºå•†å“Schema (éƒ¨åˆ†å­—æ®µå¯é€‰)
export const createProductSchema = productSchema.omit({ id: true })

// æ›´æ–°å•†å“Schema (æ‰€æœ‰å­—æ®µå¯é€‰)
export const updateProductSchema = productSchema.partial()
```

### 3. é”™è¯¯å¤„ç†è§„èŒƒ

**ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼**:

```typescript
// lib/errors.ts
export class APIError extends Error {
  constructor(public message: string, public statusCode: number = 500, public code?: string) {
    super(message)
    this.name = 'APIError'
  }
}

// ä½¿ç”¨ç¤ºä¾‹
export async function GET(request: NextRequest) {
  try {
    const data = await fetchData()
    return NextResponse.json({ success: true, data })
  } catch (error) {
    if (error instanceof APIError) {
      return NextResponse.json(
        {
          success: false,
          error: error.message,
          code: error.code,
        },
        { status: error.statusCode }
      )
    }

    return NextResponse.json({ success: false, error: 'æœªçŸ¥é”™è¯¯' }, { status: 500 })
  }
}
```

---

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### 1. æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

| æµ‹è¯•ç±»å‹ | å½“å‰è¦†ç›–ç‡ | ç›®æ ‡è¦†ç›–ç‡   | ä¼˜å…ˆçº§ |
| -------- | ---------- | ------------ | ------ |
| å•å…ƒæµ‹è¯• | 10%        | 80%          | ğŸ”´ é«˜  |
| é›†æˆæµ‹è¯• | 5%         | 70%          | ğŸŸ¡ ä¸­  |
| E2E æµ‹è¯• | 0%         | 40%          | ğŸŸ¢ ä½  |
| å®‰å…¨æµ‹è¯• | é…ç½®å®Œæˆ   | 100%å…³é”®è·¯å¾„ | ğŸ”´ é«˜  |

### 2. å•å…ƒæµ‹è¯•è§„èŒƒ (Jest)

```typescript
// __tests__/lib/services/products.test.ts
import { describe, it, expect, beforeEach } from '@jest/globals'
import { ProductService } from '@/lib/services/products'

describe('ProductService', () => {
  beforeEach(() => {
    // é‡ç½®mockå’Œæµ‹è¯•æ•°æ®
  })

  describe('getProducts', () => {
    it('åº”è¯¥è¿”å›å•†å“åˆ—è¡¨', async () => {
      const result = await ProductService.getProducts({ page: 1, pageSize: 10 })

      expect(result.data).toHaveLength(10)
      expect(result.total).toBeGreaterThan(0)
      expect(result.data[0]).toHaveProperty('id')
      expect(result.data[0]).toHaveProperty('name')
    })

    it('åº”è¯¥æ”¯æŒåˆ†é¡µæŸ¥è¯¢', async () => {
      const page1 = await ProductService.getProducts({ page: 1, pageSize: 5 })
      const page2 = await ProductService.getProducts({ page: 2, pageSize: 5 })

      expect(page1.data).toHaveLength(5)
      expect(page2.data).toHaveLength(5)
      expect(page1.data[0].id).not.toBe(page2.data[0].id)
    })

    it('åº”è¯¥æ”¯æŒå…³é”®è¯æœç´¢', async () => {
      const result = await ProductService.getProducts({ keyword: 'å•¤é…’' })

      expect(result.data.every(p => p.name.includes('å•¤é…’'))).toBe(true)
    })
  })

  describe('createProduct', () => {
    it('åº”è¯¥åˆ›å»ºæ–°å•†å“', async () => {
      const newProduct = {
        name: 'æµ‹è¯•å•†å“',
        price: 99.99,
        categoryId: 'cat-123',
        status: 'active' as const,
        stock: 100,
      }

      const product = await ProductService.createProduct(newProduct)

      expect(product).toHaveProperty('id')
      expect(product.name).toBe(newProduct.name)
    })

    it('åº”è¯¥éªŒè¯å¿…å¡«å­—æ®µ', async () => {
      const invalidProduct = { name: '' }

      await expect(ProductService.createProduct(invalidProduct as any)).rejects.toThrow(
        'å•†å“åç§°ä¸èƒ½ä¸ºç©º'
      )
    })
  })
})
```

### 3. é›†æˆæµ‹è¯•è§„èŒƒ

**ä¿®å¤å·²çŸ¥é—®é¢˜**:

- âŒ **fetch æœªå®šä¹‰**: åœ¨ Node.js ç¯å¢ƒé…ç½®`global.fetch` (ä½¿ç”¨`node-fetch`æˆ–`undici`)
- âŒ **Request æœªå®šä¹‰**: åœ¨`jest.setup.ts`ä¸­ mock Next.js API ç±»å‹
- âŒ **Mock æ•°æ®ä¸åŒ¹é…**: ç¡®ä¿ mockDB è¿”å›`null`è€Œéç©ºæ•°ç»„

```typescript
// jest.setup.ts
import 'whatwg-fetch' // æˆ– node-fetch

global.Request = class Request {} as any
global.Response = class Response {} as any

// __tests__/integration/api/products.test.ts
import { GET } from '@/app/api/products/route'
import { NextRequest } from 'next/server'

describe('Products API Integration', () => {
  it('GET /api/products åº”è¯¥è¿”å›å•†å“åˆ—è¡¨', async () => {
    const request = new NextRequest('http://localhost:3000/api/products?page=1&pageSize=10')
    const response = await GET(request)
    const data = await response.json()

    expect(response.status).toBe(200)
    expect(data.success).toBe(true)
    expect(data.data).toBeInstanceOf(Array)
  })
})
```

### 4. E2E æµ‹è¯•è§„èŒƒ (Playwright)

```typescript
// e2e/products.spec.ts
import { test, expect } from '@playwright/test'

test.describe('å•†å“ç®¡ç†', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('http://localhost:3000/dashboard/products')
  })

  test('åº”è¯¥æ˜¾ç¤ºå•†å“åˆ—è¡¨', async ({ page }) => {
    await expect(page.locator('h1')).toContainText('å•†å“ç®¡ç†')
    await expect(page.locator('[data-testid="product-item"]')).toHaveCount(10)
  })

  test('åº”è¯¥èƒ½å¤Ÿåˆ›å»ºæ–°å•†å“', async ({ page }) => {
    await page.click('button:has-text("æ–°å¢å•†å“")')
    await page.fill('input[name="name"]', 'æµ‹è¯•å•†å“')
    await page.fill('input[name="price"]', '99.99')
    await page.click('button:has-text("ä¿å­˜")')

    await expect(page.locator('text=åˆ›å»ºæˆåŠŸ')).toBeVisible()
  })
})
```

### 5. æµ‹è¯•å‘½ä»¤

```bash
# å•å…ƒæµ‹è¯•
npm run test:unit           # è¿è¡Œå•å…ƒæµ‹è¯•
npm run test:unit -- --watch # ç›‘å¬æ¨¡å¼

# é›†æˆæµ‹è¯•
npm run test:integration    # è¿è¡Œé›†æˆæµ‹è¯•

# E2Eæµ‹è¯•
npm run test:e2e           # è¿è¡ŒE2Eæµ‹è¯•
npm run test:e2e -- --ui   # UIæ¨¡å¼

# æ€§èƒ½æµ‹è¯•
npm run test:performance   # K6æ€§èƒ½æµ‹è¯•

# å®‰å…¨æµ‹è¯•
npm run test:security      # å®‰å…¨æ‰«æ

# è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage      # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

---

## ğŸ”’ å®‰å…¨ä¸æ€§èƒ½è§„èŒƒ

### 1. ç¯å¢ƒå˜é‡ç®¡ç†

**æ•æ„Ÿä¿¡æ¯å¿…é¡»ä½¿ç”¨ç¯å¢ƒå˜é‡**:

```typescript
// âœ… æ­£ç¡®: ä½¿ç”¨ç¯å¢ƒå˜é‡
const dbConfig = {
  host: process.env.DB_HOST,
  user: process.env.DB_USER,
  password: process.env.DB_PASSWORD,
}

// âŒ é”™è¯¯: ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
const apiKey = 'sk-abc123...' // æ°¸è¿œä¸è¦ç¡¬ç¼–ç å¯†é’¥
```

**ç¯å¢ƒå˜é‡éªŒè¯**:

```typescript
// config/env.validator.ts
import { z } from 'zod'

const envSchema = z.object({
  DATABASE_URL: z.string().url(),
  REDIS_URL: z.string().url(),
  API_KEY: z.string().min(10),
  NODE_ENV: z.enum(['development', 'production', 'test']),
})

export const env = envSchema.parse(process.env)
```

### 2. ç¼“å­˜ç­–ç•¥

**ä¼˜å…ˆä½¿ç”¨ Redis ç¼“å­˜**:

```typescript
// lib/cache/redis.ts
import { Redis } from '@upstash/redis'

const redis = new Redis({
  url: process.env.REDIS_URL!,
  token: process.env.REDIS_TOKEN!,
})

export async function getCachedData<T>(
  key: string,
  fetcher: () => Promise<T>,
  ttl: number = 3600
): Promise<T> {
  // å°è¯•ä»ç¼“å­˜è¯»å–
  const cached = await redis.get<T>(key)
  if (cached) return cached

  // ç¼“å­˜æœªå‘½ä¸­,è·å–æ•°æ®
  const data = await fetcher()
  await redis.setex(key, ttl, data)

  return data
}
```

### 3. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

```typescript
// âœ… æ­£ç¡®: ä½¿ç”¨ç´¢å¼•å­—æ®µæŸ¥è¯¢
SELECT * FROM products WHERE category_id = ? AND status = 'active';

// âœ… æ­£ç¡®: ä½¿ç”¨åˆ†é¡µ
SELECT * FROM products LIMIT 10 OFFSET 0;

// âŒ é”™è¯¯: å…¨è¡¨æ‰«æ
SELECT * FROM products WHERE LOWER(name) LIKE '%å…³é”®è¯%';
```

### 4. æ€§èƒ½ç›‘æ§

```typescript
// lib/monitoring/metrics.ts
export function recordMetric(name: string, value: number) {
  console.log(`[Metric] ${name}: ${value}ms`)
  // å‘é€åˆ°ç›‘æ§æœåŠ¡ (å¦‚Vercel Analytics)
}

// ä½¿ç”¨ç¤ºä¾‹
const start = Date.now()
const data = await fetchData()
recordMetric('fetchData', Date.now() - start)
```

---

## ğŸ“¦ å¸¸ç”¨ä»£ç ç‰‡æ®µ

### 1. Server Action ç¤ºä¾‹

```typescript
// lib/actions/products.ts
'use server'

import { revalidatePath } from 'next/cache'
import { ProductService } from '@/lib/services/products'
import { createProductSchema } from '@/lib/validations/product'

export async function createProduct(formData: FormData) {
  try {
    const data = {
      name: formData.get('name') as string,
      price: Number(formData.get('price')),
      categoryId: formData.get('categoryId') as string,
      status: formData.get('status') as 'active' | 'inactive',
      stock: Number(formData.get('stock')),
    }

    const validated = createProductSchema.parse(data)
    const product = await ProductService.createProduct(validated)

    revalidatePath('/dashboard/products')

    return { success: true, data: product }
  } catch (error) {
    return { success: false, error: error.message }
  }
}
```

### 2. è¡¨å•å¤„ç† (React Hook Form + Zod)

```typescript
'use client'

import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { createProductSchema } from '@/lib/validations/product'

export function ProductForm() {
  const form = useForm({
    resolver: zodResolver(createProductSchema),
    defaultValues: {
      name: '',
      price: 0,
      status: 'active',
      stock: 0,
    },
  })

  const onSubmit = async data => {
    const result = await createProduct(data)
    if (result.success) {
      alert('åˆ›å»ºæˆåŠŸ')
    }
  }

  return (
    <form onSubmit={form.handleSubmit(onSubmit)}>
      <input {...form.register('name')} />
      {form.formState.errors.name && <p>{form.formState.errors.name.message}</p>}

      <button type="submit">æäº¤</button>
    </form>
  )
}
```

### 3. æ•°æ®è·å–æ¨¡å¼

```typescript
// Server Componentæ•°æ®è·å–
export default async function ProductsPage() {
  const products = await fetch('http://localhost:3000/api/products', {
    cache: 'no-store', // ç¦ç”¨ç¼“å­˜
    // next: { revalidate: 60 }, // æˆ–ä½¿ç”¨ISR
  }).then(res => res.json())

  return <ProductList products={products.data} />
}

// Client Componentæ•°æ®è·å–
;('use client')

import { useEffect, useState } from 'react'

export function ProductList() {
  const [products, setProducts] = useState([])

  useEffect(() => {
    fetch('/api/products')
      .then(res => res.json())
      .then(data => setProducts(data.data))
  }, [])

  return <div>{/* æ¸²æŸ“é€»è¾‘ */}</div>
}
```

---

## ğŸš€ Git æäº¤è§„èŒƒ

ä½¿ç”¨ **Conventional Commits** æ ¼å¼:

```bash
# åŠŸèƒ½å¼€å‘
git commit -m "feat: æ·»åŠ å•†å“æœç´¢åŠŸèƒ½"
git commit -m "feat(products): æ”¯æŒæ‰¹é‡å¯¼å…¥å•†å“"

# Bugä¿®å¤
git commit -m "fix: ä¿®å¤å•†å“ä»·æ ¼è®¡ç®—é”™è¯¯"
git commit -m "fix(api): ä¿®å¤åˆ†é¡µå‚æ•°éªŒè¯é—®é¢˜"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°APIæ–‡æ¡£"

# æ ·å¼è°ƒæ•´
git commit -m "style: ç»Ÿä¸€å•†å“å¡ç‰‡æ ·å¼"

# é‡æ„
git commit -m "refactor: ä¼˜åŒ–å•†å“æœåŠ¡ä»£ç ç»“æ„"

# æ€§èƒ½ä¼˜åŒ–
git commit -m "perf: ä¼˜åŒ–å•†å“åˆ—è¡¨æŸ¥è¯¢æ€§èƒ½"

# æµ‹è¯•
git commit -m "test: æ·»åŠ å•†å“æœåŠ¡å•å…ƒæµ‹è¯•"

# æ„å»ºé…ç½®
git commit -m "build: å‡çº§Next.jsåˆ°15.1.0"
git commit -m "chore: é…ç½®ESLintè§„åˆ™"
```

---

## ğŸ“ æ³¨é‡Šè§„èŒƒ

### 1. å‡½æ•°æ³¨é‡Š (JSDoc)

```typescript
/**
 * è·å–å•†å“åˆ—è¡¨
 * @param filters - è¿‡æ»¤æ¡ä»¶
 * @param filters.page - é¡µç  (é»˜è®¤1)
 * @param filters.pageSize - æ¯é¡µæ•°é‡ (é»˜è®¤10)
 * @param filters.categoryId - åˆ†ç±»ID (å¯é€‰)
 * @returns å•†å“åˆ—è¡¨å’Œåˆ†é¡µä¿¡æ¯
 * @throws {APIError} å½“æŸ¥è¯¢å¤±è´¥æ—¶æŠ›å‡º
 * @example
 * const result = await getProducts({ page: 1, pageSize: 20 });
 * console.log(result.data); // Product[]
 */
export async function getProducts(filters: ProductFilters): Promise<ProductsResponse> {
  // å®ç°é€»è¾‘
}
```

### 2. å¤æ‚é€»è¾‘æ³¨é‡Š

```typescript
// âœ… æ­£ç¡®: è§£é‡Š"ä¸ºä»€ä¹ˆ"è€Œé"åšä»€ä¹ˆ"
// ä½¿ç”¨Redisç¼“å­˜å‡å°‘æ•°æ®åº“æŸ¥è¯¢å‹åŠ›,ç¼“å­˜æ—¶é—´5åˆ†é’Ÿ
const cached = await redis.get(cacheKey)

// âŒ é”™è¯¯: è¯´æ˜æ˜¾è€Œæ˜“è§çš„å†…å®¹
// è®¾ç½®å˜é‡iä¸º0
let i = 0
```

---

## ğŸ› ï¸ æ•…éšœæ’æŸ¥æŒ‡å—

### å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### 1. æµ‹è¯•å¤±è´¥: `fetch is not defined`

**åŸå› **: Node.js ç¯å¢ƒç¼ºå°‘ fetch API  
**è§£å†³æ–¹æ¡ˆ**:

```typescript
// jest.setup.ts
import 'whatwg-fetch'
// æˆ–å®‰è£… node-fetch
```

#### 2. æµ‹è¯•å¤±è´¥: `Request is not defined`

**åŸå› **: Next.js æœåŠ¡ç«¯ API ç±»å‹æœª mock  
**è§£å†³æ–¹æ¡ˆ**:

```typescript
// jest.setup.ts
global.Request = class Request {} as any
global.Response = class Response {} as any
```

#### 3. Mock æ•°æ®ä¸åŒ¹é…

**åŸå› **: mockDB è¿”å›ç©ºæ•°ç»„è€Œé null  
**è§£å†³æ–¹æ¡ˆ**:

```typescript
// __tests__/lib/utils/storage.test.ts
it('returns null for non-existent keys', () => {
  const result = mockDB.get('nonexistent')
  expect(result).toBeUndefined() // æ”¹ä¸ºtoBeUndefinedæˆ–ä¿®æ”¹mockDBå®ç°
})
```

#### 4. Zod éªŒè¯å¤±è´¥

**åŸå› **: schema å®šä¹‰ä¸å®é™…æ•°æ®ä¸åŒ¹é…  
**è§£å†³æ–¹æ¡ˆ**: æ£€æŸ¥å¹¶æ›´æ–° validation schema

```typescript
// æ£€æŸ¥productSchemaå®šä¹‰æ˜¯å¦åŒ¹é…å®é™…ä½¿ç”¨çš„å­—æ®µ
export const productSchema = z.object({
  id: z.string().uuid(),
  name: z.string().min(1),
  price: z.number().positive(),
  // ç¡®ä¿æ‰€æœ‰å¿…å¡«å­—æ®µéƒ½å·²å®šä¹‰
})
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£ç´¢å¼•

- **é¡¹ç›®æ€»è§ˆ**: `README.md`
- **æ¨¡å—æ¦‚è§ˆ**: `docs/MODULE_OVERVIEW.md`
- **åŠŸèƒ½æ¸…å•**: `docs/FEATURE_LIST.md`
- **ç³»ç»Ÿå®¡è®¡æŠ¥å‘Š**: `docs/SYSTEM_AUDIT_REPORT.md`
- **è·¯çº¿å›¾**: `docs/NEXT_PHASE_ROADMAP.md`
- **ç¯å¢ƒé…ç½®**: `docs/README.env.md`
- **æµ‹è¯•ç­–ç•¥**: `__tests__/README.md` (å¾…åˆ›å»º)

---

## âœ… å¼€å‘æ£€æŸ¥æ¸…å•

åœ¨æäº¤ä»£ç å‰,ç¡®ä¿å®Œæˆä»¥ä¸‹æ£€æŸ¥:

- [ ] ä»£ç ç¬¦åˆ TypeScript ä¸¥æ ¼æ¨¡å¼
- [ ] æ‰€æœ‰å‡½æ•°æœ‰æ˜ç¡®ç±»å‹å®šä¹‰
- [ ] ä½¿ç”¨ Zod éªŒè¯ API è¾“å…¥
- [ ] æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†
- [ ] ç¼–å†™å•å…ƒæµ‹è¯• (ç›®æ ‡ 80%è¦†ç›–ç‡)
- [ ] æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] ä½¿ç”¨ Conventional Commits æ ¼å¼æäº¤
- [ ] ä»£ç é€šè¿‡ ESLint æ£€æŸ¥
- [ ] æµ‹è¯•é€šè¿‡ (`npm run test:unit`)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-01-19  
**ç»´æŠ¤è€…**: YYC-Cube  
**è”ç³»æ–¹å¼**: admin@0379.email
