{"numFailedTestSuites":3,"numFailedTests":10,"numPassedTestSuites":19,"numPassedTests":75,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":22,"numTotalTests":85,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1762692718379,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["mockDB"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"mockDB stores and retrieves data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"stores and retrieves data"},{"ancestorTitles":["mockDB"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeNull\u001b[2m()\u001b[22m\n\nReceived: \u001b[31m[]\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeNull\u001b[2m()\u001b[22m\n\nReceived: \u001b[31m[]\u001b[39m\n    at Object.toBeNull (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/utils/storage.test.ts:18:20)\n    at Promise.then.completed (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"mockDB returns null for non-existent keys","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"returns null for non-existent keys"},{"ancestorTitles":["mockDB"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"mockDB handles complex objects","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"handles complex objects"}],"endTime":1762692718974,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mmockDB › returns null for non-existent keys\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBeNull\u001b[2m()\u001b[22m\n\n    Received: \u001b[31m[]\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 16 |\u001b[39m   it(\u001b[32m\"returns null for non-existent keys\"\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m     \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m mockDB\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m\"nonexistent\"\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 18 |\u001b[39m     expect(result)\u001b[33m.\u001b[39mtoBeNull()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   })\u001b[22m\n\u001b[2m     \u001b[90m 20 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m   it(\u001b[32m\"handles complex objects\"\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBeNull (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/utils/storage.test.ts\u001b[39m\u001b[0m\u001b[2m:18:20)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/utils/storage.test.ts","startTime":1762692718748,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Redis Cache","get"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Redis Cache get should return cached value","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return cached value"},{"ancestorTitles":["Redis Cache","get"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Redis Cache get should return null for missing key","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return null for missing key"},{"ancestorTitles":["Redis Cache","set"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Redis Cache set should cache value with TTL","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should cache value with TTL"},{"ancestorTitles":["Redis Cache","delete"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Redis Cache delete should remove cached value","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should remove cached value"}],"endTime":1762692718983,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/cache/redis.test.ts","startTime":1762692718761,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Product Validation","productSchema"],"duration":4,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at Object.toBe (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/validations/product.test.ts:22:30)\n    at Promise.then.completed (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"Product Validation productSchema 应该验证有效的商品数据","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该验证有效的商品数据"},{"ancestorTitles":["Product Validation","productSchema"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Product Validation productSchema 应该拒绝无效的商品名称","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"应该拒绝无效的商品名称"},{"ancestorTitles":["Product Validation","productSchema"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Product Validation productSchema 应该拒绝负数价格","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"应该拒绝负数价格"},{"ancestorTitles":["Product Validation","productSchema"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Product Validation productSchema 应该拒绝无效的状态值","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"应该拒绝无效的状态值"}],"endTime":1762692718992,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mProduct Validation › productSchema › 应该验证有效的商品数据\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mfalse\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 20 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 21 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m productSchema\u001b[33m.\u001b[39msafeParse(validProduct)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 22 |\u001b[39m       expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m     })\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 25 |\u001b[39m     it(\u001b[32m\"应该拒绝无效的商品名称\"\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/validations/product.test.ts\u001b[39m\u001b[0m\u001b[2m:22:30)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/validations/product.test.ts","startTime":1762692718754,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["ProductService","getProducts"],"duration":13,"failureDetails":[{}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveLength\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must have a length property whose value must be a number\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.toHaveLength (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/api/services/products.test.ts:21:27)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"ProductService getProducts 应该返回商品列表","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该返回商品列表"},{"ancestorTitles":["ProductService","getProducts"],"duration":1,"failureDetails":[{}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveLength\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must have a length property whose value must be a number\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.toHaveLength (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/api/services/products.test.ts:37:27)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"ProductService getProducts 应该支持分页查询","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该支持分页查询"},{"ancestorTitles":["ProductService","getProducts"],"duration":0,"failureDetails":[{}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveLength\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n\u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must have a length property whose value must be a number\n\nReceived has value: \u001b[31mundefined\u001b[39m\n    at Object.toHaveLength (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/api/services/products.test.ts:56:27)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"ProductService getProducts 应该支持搜索过滤","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该支持搜索过滤"},{"ancestorTitles":["ProductService","createProduct"],"duration":1,"failureDetails":[{"matcherResult":{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"id\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nReceived value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"id\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nReceived value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m\n    at Object.toHaveProperty (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/api/services/products.test.ts:73:22)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"ProductService createProduct 应该创建新商品","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该创建新商品"},{"ancestorTitles":["ProductService","createProduct"],"duration":0,"failureDetails":[{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m"}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m\n    at expect (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/api/services/products.test.ts:84:13)\n    at Promise.then.completed (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"ProductService createProduct 应该验证必填字段","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该验证必填字段"},{"ancestorTitles":["ProductService","updateProduct"],"duration":0,"failureDetails":[{"matcherResult":{"expected":"更新后的商品","message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"更新后的商品\"\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m","name":"toBe","pass":false}}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"更新后的商品\"\u001b[39m\nReceived: \u001b[31mundefined\u001b[39m\n    at Object.toBe (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/api/services/products.test.ts:97:27)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)"],"fullName":"ProductService updateProduct 应该更新商品信息","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"应该更新商品信息"},{"ancestorTitles":["ProductService","updateProduct"],"duration":1,"failureDetails":[{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m"}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m\n    at expect (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/api/services/products.test.ts:102:13)\n    at Promise.then.completed (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"ProductService updateProduct 商品不存在时应该抛出错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"商品不存在时应该抛出错误"},{"ancestorTitles":["ProductService","deleteProduct"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"ProductService deleteProduct 应该删除商品","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"应该删除商品"},{"ancestorTitles":["ProductService","deleteProduct"],"duration":1,"failureDetails":[{"message":"\u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m"}],"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m\n    at expect (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/node_modules/expect/build/index.js:113:15)\n    at Object.expect (/Users/yanyu/yyc3-admin-system-2/__tests__/lib/api/services/products.test.ts:112:13)\n    at Promise.then.completed (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at _runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/yanyu/yyc3-admin-system-2/node_modules/jest-runner/build/testWorker.js:106:12)"],"fullName":"ProductService deleteProduct 商品不存在时应该抛出错误","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"status":"failed","title":"商品不存在时应该抛出错误"}],"endTime":1762692718993,"message":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mProductService › getProducts › 应该返回商品列表\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveLength\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must have a length property whose value must be a number\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 19 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m productService\u001b[33m.\u001b[39mgetProducts({ page\u001b[33m:\u001b[39m \u001b[35m1\u001b[39m\u001b[33m,\u001b[39m pageSize\u001b[33m:\u001b[39m \u001b[35m10\u001b[39m })\u001b[22m\n\u001b[2m     \u001b[90m 20 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 21 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 22 |\u001b[39m       expect(result\u001b[33m.\u001b[39mtotal)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 23 |\u001b[39m     })\u001b[22m\n\u001b[2m     \u001b[90m 24 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveLength (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/api/services/products.test.ts\u001b[39m\u001b[0m\u001b[2m:21:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mProductService › getProducts › 应该支持分页查询\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveLength\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must have a length property whose value must be a number\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 35 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m productService\u001b[33m.\u001b[39mgetProducts({ page\u001b[33m:\u001b[39m \u001b[35m2\u001b[39m\u001b[33m,\u001b[39m pageSize\u001b[33m:\u001b[39m \u001b[35m10\u001b[39m })\u001b[22m\n\u001b[2m     \u001b[90m 36 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 37 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m10\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 38 |\u001b[39m       expect(result\u001b[33m.\u001b[39mpage)\u001b[33m.\u001b[39mtoBe(\u001b[35m2\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 39 |\u001b[39m     })\u001b[22m\n\u001b[2m     \u001b[90m 40 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveLength (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/api/services/products.test.ts\u001b[39m\u001b[0m\u001b[2m:37:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mProductService › getProducts › 应该支持搜索过滤\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveLength\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    \u001b[1mMatcher error\u001b[22m: \u001b[31mreceived\u001b[39m value must have a length property whose value must be a number\n\n    Received has value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 54 |\u001b[39m       })\u001b[22m\n\u001b[2m     \u001b[90m 55 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 56 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 57 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mevery((p) \u001b[33m=>\u001b[39m p\u001b[33m.\u001b[39mname\u001b[33m.\u001b[39mincludes(\u001b[32m\"啤酒\"\u001b[39m)))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 58 |\u001b[39m     })\u001b[22m\n\u001b[2m     \u001b[90m 59 |\u001b[39m   })\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveLength (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/api/services/products.test.ts\u001b[39m\u001b[0m\u001b[2m:56:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mProductService › createProduct › 应该创建新商品\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected path: \u001b[32m\"id\"\u001b[39m\n    Received path: \u001b[31m[]\u001b[39m\n\n    Received value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 71 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m productService\u001b[33m.\u001b[39mcreateProduct(newProduct)\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 73 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m\"id\"\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 74 |\u001b[39m       expect(result\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(newProduct\u001b[33m.\u001b[39mname)\u001b[22m\n\u001b[2m     \u001b[90m 75 |\u001b[39m       expect(result\u001b[33m.\u001b[39mprice)\u001b[33m.\u001b[39mtoBe(newProduct\u001b[33m.\u001b[39mprice)\u001b[22m\n\u001b[2m     \u001b[90m 76 |\u001b[39m     })\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveProperty (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/api/services/products.test.ts\u001b[39m\u001b[0m\u001b[2m:73:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mProductService › createProduct › 应该验证必填字段\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Received promise resolved instead of rejected\n    Resolved to value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 82 |\u001b[39m       }\u001b[22m\n\u001b[2m     \u001b[90m 83 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 84 |\u001b[39m       \u001b[36mawait\u001b[39m expect(productService\u001b[33m.\u001b[39mcreateProduct(invalidProduct \u001b[36mas\u001b[39m any))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m     })\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m   })\u001b[22m\n\u001b[2m     \u001b[90m 87 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat expect (\u001b[22m\u001b[2mnode_modules/jest-circus/node_modules/expect/build/index.js\u001b[2m:113:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.expect (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/api/services/products.test.ts\u001b[39m\u001b[0m\u001b[2m:84:13)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mProductService › updateProduct › 应该更新商品信息\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m\"更新后的商品\"\u001b[39m\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m  95 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m productService\u001b[33m.\u001b[39mupdateProduct(\u001b[32m\"1\"\u001b[39m\u001b[33m,\u001b[39m updates)\u001b[22m\n\u001b[2m     \u001b[90m  96 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m  97 |\u001b[39m       expect(result\u001b[33m.\u001b[39mname)\u001b[33m.\u001b[39mtoBe(updates\u001b[33m.\u001b[39mname)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m  98 |\u001b[39m       expect(result\u001b[33m.\u001b[39mprice)\u001b[33m.\u001b[39mtoBe(updates\u001b[33m.\u001b[39mprice)\u001b[22m\n\u001b[2m     \u001b[90m  99 |\u001b[39m     })\u001b[22m\n\u001b[2m     \u001b[90m 100 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/api/services/products.test.ts\u001b[39m\u001b[0m\u001b[2m:97:27)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mProductService › updateProduct › 商品不存在时应该抛出错误\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Received promise resolved instead of rejected\n    Resolved to value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 100 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 101 |\u001b[39m     it(\u001b[32m\"商品不存在时应该抛出错误\"\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 102 |\u001b[39m       \u001b[36mawait\u001b[39m expect(productService\u001b[33m.\u001b[39mupdateProduct(\u001b[32m\"999\"\u001b[39m\u001b[33m,\u001b[39m { name\u001b[33m:\u001b[39m \u001b[32m\"测试\"\u001b[39m }))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"商品不存在\"\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 103 |\u001b[39m     })\u001b[22m\n\u001b[2m     \u001b[90m 104 |\u001b[39m   })\u001b[22m\n\u001b[2m     \u001b[90m 105 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat expect (\u001b[22m\u001b[2mnode_modules/jest-circus/node_modules/expect/build/index.js\u001b[2m:113:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.expect (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/api/services/products.test.ts\u001b[39m\u001b[0m\u001b[2m:102:13)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mProductService › deleteProduct › 商品不存在时应该抛出错误\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Received promise resolved instead of rejected\n    Resolved to value: \u001b[31m{\"error\": \"fetch is not defined\", \"success\": false}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 110 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 111 |\u001b[39m     it(\u001b[32m\"商品不存在时应该抛出错误\"\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 112 |\u001b[39m       \u001b[36mawait\u001b[39m expect(productService\u001b[33m.\u001b[39mdeleteProduct(\u001b[32m\"999\"\u001b[39m))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m\"商品不存在\"\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 113 |\u001b[39m     })\u001b[22m\n\u001b[2m     \u001b[90m 114 |\u001b[39m   })\u001b[22m\n\u001b[2m     \u001b[90m 115 |\u001b[39m })\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat expect (\u001b[22m\u001b[2mnode_modules/jest-circus/node_modules/expect/build/index.js\u001b[2m:113:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.expect (\u001b[22m\u001b[2m\u001b[0m\u001b[36m__tests__/lib/api/services/products.test.ts\u001b[39m\u001b[0m\u001b[2m:112:13)\u001b[22m\u001b[2m\u001b[22m\n","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/api/services/products.test.ts","startTime":1762692718758,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Order Validation","validateOrderData"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Order Validation validateOrderData should validate correct order data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate correct order data"},{"ancestorTitles":["Order Validation","validateOrderData"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Order Validation validateOrderData should reject negative amounts","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reject negative amounts"},{"ancestorTitles":["Order Validation","validateOrderData"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Order Validation validateOrderData should validate order items","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate order items"},{"ancestorTitles":["Order Validation","validateOrderStatus"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Order Validation validateOrderStatus should validate status transitions","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate status transitions"}],"endTime":1762692718997,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/validations/order.test.ts","startTime":1762692718784,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Products API","GET /api/products"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Products API GET /api/products should return products list","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return products list"},{"ancestorTitles":["Products API","GET /api/products"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Products API GET /api/products should support pagination","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should support pagination"},{"ancestorTitles":["Products API","GET /api/products"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Products API GET /api/products should support filtering","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should support filtering"},{"ancestorTitles":["Products API","POST /api/products"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Products API POST /api/products should create new product","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should create new product"},{"ancestorTitles":["Products API","POST /api/products"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Products API POST /api/products should validate input","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate input"}],"endTime":1762692719008,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/api/products/route.test.ts","startTime":1762692718803,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Store","login"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Auth Store login should set user state on login","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set user state on login"},{"ancestorTitles":["Auth Store","logout"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Store logout should clear user state on logout","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should clear user state on logout"},{"ancestorTitles":["Auth Store","updateUser"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Store updateUser should update user information","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should update user information"},{"ancestorTitles":["Auth Store","checkAuth"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Auth Store checkAuth should verify authentication status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should verify authentication status"}],"endTime":1762692719006,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/store/auth-store.test.ts","startTime":1762692718809,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Smart Energy Management","monitorConsumption"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Smart Energy Management monitorConsumption should track energy usage","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should track energy usage"},{"ancestorTitles":["Smart Energy Management","optimizeUsage"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Smart Energy Management optimizeUsage should suggest optimization strategies","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should suggest optimization strategies"},{"ancestorTitles":["Smart Energy Management","detectAnomalies"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Smart Energy Management detectAnomalies should identify unusual patterns","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should identify unusual patterns"}],"endTime":1762692719014,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/iot/smart-energy-management.test.ts","startTime":1762692718983,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payment Service","processPayment"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Payment Service processPayment should process payment successfully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should process payment successfully"},{"ancestorTitles":["Payment Service","processPayment"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Payment Service processPayment should handle payment failure","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle payment failure"},{"ancestorTitles":["Payment Service","processPayment"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Payment Service processPayment should validate payment amount","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate payment amount"},{"ancestorTitles":["Payment Service","refundPayment"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Payment Service refundPayment should process refund","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should process refund"},{"ancestorTitles":["Payment Service","getPaymentStatus"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Payment Service getPaymentStatus should return payment status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return payment status"}],"endTime":1762692719024,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/services/payment.test.ts","startTime":1762692718821,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Orders API","GET /api/orders"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Orders API GET /api/orders should return orders list","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return orders list"},{"ancestorTitles":["Orders API","POST /api/orders"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Orders API POST /api/orders should create new order","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should create new order"}],"endTime":1762692719030,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/api/orders/route.test.ts","startTime":1762692718994,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Business Intelligence","generateReport"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Business Intelligence generateReport should generate BI report","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate BI report"},{"ancestorTitles":["Business Intelligence","generateReport"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Business Intelligence generateReport should support custom metrics","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should support custom metrics"},{"ancestorTitles":["Business Intelligence","analyzeData"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Business Intelligence analyzeData should analyze business data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should analyze business data"},{"ancestorTitles":["Business Intelligence","predictTrends"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Business Intelligence predictTrends should predict business trends","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should predict business trends"}],"endTime":1762692719035,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/bigdata/business-intelligence.test.ts","startTime":1762692718825,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Dynamic Pricing","calculateOptimalPrice"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Dynamic Pricing calculateOptimalPrice should calculate price based on demand","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate price based on demand"},{"ancestorTitles":["Dynamic Pricing","calculateOptimalPrice"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Dynamic Pricing calculateOptimalPrice should respect min/max constraints","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should respect min/max constraints"},{"ancestorTitles":["Dynamic Pricing","predictDemand"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Dynamic Pricing predictDemand should predict demand accurately","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should predict demand accurately"}],"endTime":1762692719039,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/ai/dynamic-pricing.test.ts","startTime":1762692719001,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Utils","cn"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Utils cn should merge class names correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should merge class names correctly"},{"ancestorTitles":["Utils","cn"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Utils cn should handle conditional classes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle conditional classes"},{"ancestorTitles":["Utils","cn"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Utils cn should handle tailwind merge","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle tailwind merge"}],"endTime":1762692719043,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/utils.test.ts","startTime":1762692718841,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Logger","log"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Logger log should log info messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should log info messages"},{"ancestorTitles":["Logger","log"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Logger log should log error messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should log error messages"},{"ancestorTitles":["Logger","log"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Logger log should log warning messages","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should log warning messages"},{"ancestorTitles":["Logger","logWithContext"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Logger logWithContext should include context in logs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should include context in logs"}],"endTime":1762692719052,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/monitoring/logger.test.ts","startTime":1762692719022,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Metrics","recordMetric"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Metrics recordMetric should record performance metrics","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should record performance metrics"},{"ancestorTitles":["Metrics","getMetrics"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Metrics getMetrics should return collected metrics","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return collected metrics"},{"ancestorTitles":["Metrics","aggregateMetrics"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Metrics aggregateMetrics should aggregate metrics over time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should aggregate metrics over time"}],"endTime":1762692719054,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/monitoring/metrics.test.ts","startTime":1762692719022,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["AI Chatbot","generateResponse"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AI Chatbot generateResponse should generate appropriate response","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate appropriate response"},{"ancestorTitles":["AI Chatbot","generateResponse"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AI Chatbot generateResponse should handle context correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle context correctly"},{"ancestorTitles":["AI Chatbot","analyzeIntent"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AI Chatbot analyzeIntent should identify user intent","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should identify user intent"}],"endTime":1762692719054,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/ai/chatbot.test.ts","startTime":1762692719021,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Members API","GET /api/members"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Members API GET /api/members should return members list","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return members list"},{"ancestorTitles":["Members API","POST /api/members"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Members API POST /api/members should create new member","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should create new member"}],"endTime":1762692719054,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/api/members/route.test.ts","startTime":1762692719021,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Blockchain Loyalty System","earnPoints"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Blockchain Loyalty System earnPoints should record points on blockchain","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should record points on blockchain"},{"ancestorTitles":["Blockchain Loyalty System","redeemPoints"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Blockchain Loyalty System redeemPoints should validate and redeem points","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate and redeem points"},{"ancestorTitles":["Blockchain Loyalty System","getBalance"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Blockchain Loyalty System getBalance should return correct balance","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return correct balance"}],"endTime":1762692719059,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/blockchain/loyalty-system.test.ts","startTime":1762692718845,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Analytics Service","trackEvent"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Analytics Service trackEvent should track user events","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should track user events"},{"ancestorTitles":["Analytics Service","trackEvent"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Analytics Service trackEvent should include metadata","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should include metadata"},{"ancestorTitles":["Analytics Service","trackPageView"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Analytics Service trackPageView should track page views","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should track page views"},{"ancestorTitles":["Analytics Service","getAnalytics"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Analytics Service getAnalytics should return analytics data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return analytics data"},{"ancestorTitles":["Analytics Service","getAnalytics"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Analytics Service getAnalytics should support date range filtering","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should support date range filtering"}],"endTime":1762692719061,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/services/analytics.test.ts","startTime":1762692718846,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Notification Service","sendNotification"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Notification Service sendNotification should send notification to user","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should send notification to user"},{"ancestorTitles":["Notification Service","sendNotification"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Notification Service sendNotification should support multiple channels","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should support multiple channels"},{"ancestorTitles":["Notification Service","sendBulkNotification"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Notification Service sendBulkNotification should send to multiple users","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should send to multiple users"},{"ancestorTitles":["Notification Service","getNotificationHistory"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Notification Service getNotificationHistory should return notification history","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return notification history"}],"endTime":1762692719063,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/services/notification.test.ts","startTime":1762692718854,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Encryption","encrypt"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Encryption encrypt should encrypt data correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should encrypt data correctly"},{"ancestorTitles":["Encryption","decrypt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Encryption decrypt should decrypt data correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should decrypt data correctly"},{"ancestorTitles":["Encryption","decrypt"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Encryption decrypt should fail with wrong key","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should fail with wrong key"},{"ancestorTitles":["Encryption","hash"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Encryption hash should generate consistent hash","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should generate consistent hash"}],"endTime":1762692719065,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/security/encryption.test.ts","startTime":1762692718855,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Member Validation","validateMemberData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Member Validation validateMemberData should validate correct member data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate correct member data"},{"ancestorTitles":["Member Validation","validateMemberData"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Member Validation validateMemberData should reject invalid phone number","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reject invalid phone number"},{"ancestorTitles":["Member Validation","validateMemberData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Member Validation validateMemberData should reject invalid email","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reject invalid email"},{"ancestorTitles":["Member Validation","validateMemberLevel"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Member Validation validateMemberLevel should validate member level","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should validate member level"}],"endTime":1762692719070,"message":"","name":"/Users/yanyu/yyc3-admin-system-2/__tests__/lib/validations/member.test.ts","startTime":1762692718872,"status":"passed","summary":""}],"wasInterrupted":false}
